# Open Energy Controller - Environment Variables
# Copy this file to .env and fill in your values

# CRITICAL: Authentication token - MUST be set for production (min 32 chars)
# Generate with: openssl rand -base64 32
OEC__AUTH__TOKEN=

# Database connection string (use strong passwords in production)
# Format: postgres://username:password@host:port/database
OEC__DATABASE__URL=postgres://oec:changeme@localhost:5432/oec_dev

# Rust logging level
RUST_LOG=info,open_energy_controller=debug

# Nord Pool / Elprisetjustnu API
NORDPOOL_API_KEY=your_api_key_here
ELPRISETJUSTNU_BASE_URL=https://www.elprisetjustnu.se

# SMHI Weather API (for solar forecasting)
SMHI_API_URL=https://opendata-download-metfcst.smhi.se

# Optional: Modbus TCP configuration for real hardware
MODBUS_BATTERY_IP=192.168.1.100
MODBUS_BATTERY_PORT=502
MODBUS_BATTERY_UNIT_ID=1

MODBUS_INVERTER_IP=192.168.1.101
MODBUS_INVERTER_PORT=502
MODBUS_INVERTER_UNIT_ID=1

# Optional: OCPP WebSocket URL for EV charger
OCPP_CHARGER_URL=ws://192.168.1.102:8080/ocpp
OCPP_CHARGER_ID=EVSE001

# Optional: Enable/disable features
OEC_ENABLE_MODBUS=false
OEC_ENABLE_OCPP=false
OEC_ENABLE_METRICS=true
OEC_ENABLE_SWAGGER=true

# Server configuration
# PRODUCTION: Bind to localhost by default. To expose on LAN, set to 0.0.0.0
# WARNING: Only expose to LAN if you have firewall protection
OEC__SERVER__HOST=127.0.0.1
OEC__SERVER__PORT=8080

# Docker Compose credentials (dev only)
# Set these to secure values if exposing services to network
POSTGRES_USER=oec
POSTGRES_PASSWORD=dev_only_insecure
POSTGRES_DB=oec
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=dev_only_insecure
PGADMIN_EMAIL=admin@oec.local
PGADMIN_PASSWORD=dev_only_insecure

# Optional: Controller configuration
OEC_CONTROLLER_TICK_SECONDS=60
OEC_REOPTIMIZE_EVERY_MINUTES=60

# Optional: Battery configuration
OEC_BATTERY_CAPACITY_KWH=10.0
OEC_BATTERY_MAX_CHARGE_KW=5.0
OEC_BATTERY_MAX_DISCHARGE_KW=5.0
OEC_BATTERY_MIN_SOC_PERCENT=20.0
OEC_BATTERY_MAX_SOC_PERCENT=95.0

# Optional: Grid configuration
OEC_GRID_FUSE_AMPS=25
OEC_GRID_MAX_IMPORT_KW=17.25
OEC_GRID_MAX_EXPORT_KW=17.25
OEC_PRICE_AREA=SE3

# Optional: Machine Learning
OEC_ML_ENABLED=false
OEC_ML_MODEL_PATH=./models/

# Optional: Optimization
OEC_OPTIMIZER_STRATEGY=dynamic_programming
OEC_OPTIMIZER_HORIZON_HOURS=24
